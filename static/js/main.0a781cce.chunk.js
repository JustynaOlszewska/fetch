(this.webpackJsonplisfetch=this.webpackJsonplisfetch||[]).push([[1],{17:function(e,t,n){"use strict";var a=n(0),c=Object(a.createContext)();t.a=c},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n.n(c),r=n(19),l=n.n(r),i=n(14),u=n(2),s=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,35))})),d=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,39))})),h=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,36))})),b=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,37))})),p=function(){return Object(a.jsxs)(c.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:[Object(a.jsx)(b,{}),Object(a.jsx)(s,{}),Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{exact:!0,path:"/"}),Object(a.jsx)(u.a,{path:"/listBooks",component:d}),Object(a.jsx)(u.a,{path:"/addBook",component:h})]})]})},j=n(21),f=n(22),O="GET_BOOKS",y="POST_BOOKS",T="PATCH_BOOKS",g="DELETE_BOOKS",E="CHANGE_TITLE",m="CHANGE_FRAGMENT",x="UPDATE_BODY",v=n(4),S=function(e,t){switch(t.type){case x:return Object(v.a)(Object(v.a)({},e),{},{changedText:t.payload});case m:return Object(v.a)(Object(v.a)({},e),{},{fragment:t.payload});case E:return Object(v.a)(Object(v.a)({},e),{},{title:t.payload});case"SET_BOOKS":case O:case y:case T:case g:return Object(v.a)(Object(v.a)({},e),{},{books:t.payload});default:return e}},C=n(17),k=function(e,t,n,a){switch(e){case"GET":return{method:"GET",body:null,headers:{"Content-type":"application/json; charset=UTF-8"}};case"POST":return{method:"POST",body:JSON.stringify({title:t,body:n}),headers:{"Content-type":"application/json; charset=UTF-8"}};case"PATCH":return{method:"PATCH",body:JSON.stringify({body:a,title:t}),headers:{"Content-type":"application/json; charset=UTF-8"}};case"DELETE":return{method:"DELETE"};default:console.log("unexpected option")}},P=function(e){var t=Object(c.useReducer)(S,{books:[],title:"",fragment:"",changedText:null}),o=Object(f.a)(t,2),r=o[0],l=o[1],i=function(e,t){var n="PATCH"===e.method||"DELETE"===e.method?"/1?userId=1":"?userId=1",a="https://jsonplaceholder.typicode.com/posts".concat(n);fetch(a,e).then((function(e){if(e.ok)return e.json();throw new Error("error in downloading data")})).then((function(n){switch(e.method){case"GET":return l({type:O,payload:n});case"POST":return l({type:y,payload:[].concat(Object(j.a)(r.books),[n])});case"PATCH":var a=r.books.map((function(e){return e.id===t&&(e.body=n.body,n.id=t),e}));return l({type:T,payload:a});case"DELETE":return l({type:g,payload:[]});default:return console.log("unexpected method")}})).catch((function(e){return console.log(e)}))};Object(c.useEffect)((function(){i(k("GET"))}),[]);return Object(a.jsx)(C.a.Provider,{value:{books:r.books,title:r.title,fragment:r.fragment,handleChangeTitle:function(e){l({type:E,payload:e.target.value})},handleChangeFragment:function(e){l({type:m,payload:e.target.value})},handleSubmitUpdating:function(e,t){if(t.preventDefault(),null===r.changedText){var a=n.e(0).then(n.bind(null,38)).then((function(e){return console.log(e.loginFormValidationRulesPatch(r.title,r.fragmen))}));return alert(a.text)}l({type:x,payload:null}),i(k("PATCH",r.title,null,r.changedText),e)},handleSubmitAdding:function(e){if(e.preventDefault(),r.books.map((function(e){return e.id+=1})),!r.title&&!r.fragment){var t=n.e(0).then(n.bind(null,38)).then((function(e){return console.log(e.loginFormValidationRules(r.title,r.fragmen))}));return alert("".concat(t.title))}i(k("POST",r.title,r.fragment))},handleChangeText:function(e){l({type:x,payload:e.target.value})},handleDeleteClick:function(){i(k("DELETE"))}},children:e.children})};var A=function(){return Object(a.jsx)(P,{children:Object(a.jsx)(i.a,{children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("h1",{children:"The best books of all time"}),Object(a.jsx)(p,{})]})})})};n(33);l.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(A,{})}),document.getElementById("root"))}},[[34,2,3]]]);
//# sourceMappingURL=main.0a781cce.chunk.js.map